## Codebase Patterns
- Server-side API: Use `process.env.API_URL` (not NEXT_PUBLIC_) for server-side requests
- Cookie forwarding: Pass cookies string from `request.headers.get('cookie')` to serverApi methods
- Next.js API routes: Place in `/app/api/[endpoint]/route.ts` format
- Dynamic route params (Next.js 15): `{ params }: { params: Promise<{ id: string }> }` - must await params

---

## 2026-01-14 - US-001
- What was implemented: Server-side API utility for making backend requests from Next.js API routes
- Files changed: `frontend/lib/server-api.ts` (created)
- **Learnings:**
  - Modeled after existing `frontend/lib/api.ts` but simplified for server-side use
  - Uses `API_URL` env var (non-public) instead of `NEXT_PUBLIC_API_URL`
  - Supports GET, POST, PUT, DELETE with generic TypeScript types
  - Accepts optional cookies string for authentication forwarding
---

## 2026-01-14 - US-002
- What was implemented: Items list API route for proxying item listing requests
- Files changed: `frontend/app/api/items/route.ts` (created)
- **Learnings:**
  - Next.js API routes use `NextRequest` and `NextResponse` from `next/server`
  - Access query params via `new URL(request.url).searchParams`
  - Forward cookies with `request.headers.get('cookie')`
  - Use `searchParams.toString()` to forward all query params at once
---

## 2026-01-14 - US-003
- What was implemented: Items batch API route for fetching multiple items by ID
- Files changed: `frontend/app/api/items/batch/route.ts` (created)
- **Learnings:**
  - Batch endpoint returns `Item[]` directly (not wrapped in response object)
  - For single query param forwarding, use `searchParams.get('paramName')` instead of `toString()`
---

## 2026-01-14 - US-004
- What was implemented: Single Item API route for fetching individual item details
- Files changed: `frontend/app/api/items/[id]/route.ts` (created)
- **Learnings:**
  - Dynamic route params in Next.js 15 App Router: `{ params }: { params: Promise<{ id: string }> }` - params is a Promise that must be awaited
  - Single item endpoint returns `Item` type directly
---

## 2026-01-14 - US-005
- What was implemented: Suggestions API route for proxying suggestion requests
- Files changed: `frontend/app/api/suggestions/route.ts` (created)
- **Learnings:**
  - Suggestions endpoint uses `SuggestionsResponse` type which wraps `SuggestionItem[]` in `data` property
  - Follows same pattern as items list route - forward all query params using `searchParams.toString()`
---

## 2026-01-14 - US-006
- What was implemented: Sync Status API route for proxying sync status requests
- Files changed: `frontend/app/api/sync/status/route.ts` (created)
- **Learnings:**
  - Sync status endpoint returns `{ last_synced_at: string | null }` - simple response structure
  - No query params needed - just forward cookies for auth
  - Defined local interface for response type since not exported from types.ts
---
